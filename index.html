<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>MyKala PRO++ Full Version</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
*{box-sizing:border-box}
body{margin:0;font-family:Tahoma,sans-serif;direction:rtl;background:#f4f6f8;}
header{background:#ef394e;padding:10px 8px;display:flex;align-items:center;gap:10px;color:#fff;flex-wrap:wrap;}
header strong{font-size:22px;cursor:pointer;}
header input{flex:1;min-width:150px;padding:8px;border:none;border-radius:6px;}
.badge{background:#fff;color:#ef394e;border-radius:50%;padding:2px 6px;font-size:12px;margin-right:4px;}
.slider img{width:100%;height:230px;object-fit:cover;}
.container{padding:15px 10px;}
.products{display:grid;grid-template-columns:repeat(auto-fit,minmax(170px,1fr));gap:15px;}
.card{background:#fff;border-radius:10px;padding:10px;box-shadow:0 4px 10px rgba(0,0,0,.1);display:flex;flex-direction:column;}
.card img{height:150px;object-fit:contain;}
.card h4{font-size:14px;margin:8px 0;flex:1;}
.price{color:#ef394e;font-weight:bold;}
button{background:#ef394e;border:none;color:#fff;padding:8px;border-radius:6px;cursor:pointer;margin-top:5px;width:100%;}
.page{display:none}
.page.active{display:block}
.cart-item{background:#fff;padding:10px;border-radius:8px;margin-bottom:10px;display:flex;justify-content:space-between;flex-wrap:wrap;}
footer{background:#333;color:#fff;text-align:center;padding:12px;margin-top:20px;}
input, select{margin:5px 0;padding:6px;border-radius:4px;border:1px solid #ccc;width:100%;}
textarea{border:1px solid #ccc;border-radius:4px;padding:6px;width:100%;resize:none;}
.admin-panel,.user-panel{background:#fff;padding:15px;border-radius:8px;box-shadow:0 4px 10px rgba(0,0,0,.1);max-width:500px;margin:0 auto;}
.admin-panel h3,.user-panel h3{margin-top:0;}
</style>
</head>
<body>

<header>
  <strong onclick="showPage('home')">MyKala</strong>
  <input id="search" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ù…Ø­ØµÙˆÙ„Ø§Øª...">
  <span onclick="showPage('cartUser')">ğŸ›’ <span class="badge" id="cartCount">0</span></span>
  <span onclick="showPage('login')">ÙˆØ±ÙˆØ¯</span>
</header>

<div class="slider">
  <img id="slide" src="https://picsum.photos/1200/300?1">
</div>

<div class="container">

<!-- HOME -->
<div id="home" class="page active">
  <div class="products" id="productList"></div>
</div>

<!-- LOGIN SHARED -->
<div id="login" class="page">
  <h3>ÙˆØ±ÙˆØ¯ / Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</h3>
  <input id="loginUser" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø§ÛŒÙ…ÛŒÙ„"><br>
  <input id="loginPass" type="password" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±"><br>
  <button onclick="login()">ÙˆØ±ÙˆØ¯</button>
</div>

<!-- ADMIN PANEL -->
<div id="admin" class="page">
  <div class="admin-panel">
    <h3>Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</h3>
    <h4>Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø­ØµÙˆÙ„ Ø¬Ø¯ÛŒØ¯</h4>
    <input id="adminName" placeholder="Ù†Ø§Ù… Ù…Ø­ØµÙˆÙ„">
    <input id="adminPrice" placeholder="Ù‚ÛŒÙ…Øª">
    <input id="adminImg" placeholder="Ù„ÛŒÙ†Ú© Ø¹Ú©Ø³">
    <button onclick="addProduct()">Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø­ØµÙˆÙ„</button>
    <h4>Ù…Ø­ØµÙˆÙ„Ø§Øª Ù…ÙˆØ¬ÙˆØ¯</h4>
    <div id="adminProducts"></div>
    <h4>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯Ù‡Ø§ (Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§)</h4>
    <div id="adminCart"></div>
  </div>
</div>

<!-- USER PANEL -->
<div id="user" class="page">
  <div class="user-panel">
    <h3>Ù¾Ù†Ù„ Ú©Ø§Ø±Ø¨Ø±ÛŒ</h3>
    <h4>Ù…Ø­ØµÙˆÙ„Ø§Øª</h4>
    <div class="products" id="userProductList"></div>
  </div>
</div>

<!-- USER CART -->
<div id="cartUser" class="page">
  <h3>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§</h3>
  <div id="cartItemsUser"></div>
  <h4 id="totalPriceUser"></h4>
</div>

</div>

<footer>Â© 2025 MyKala PRO++</footer>

<script>
/* SLIDER */
const slides=["https://picsum.photos/1200/300?1","https://picsum.photos/1200/300?2","https://picsum.photos/1200/300?3"];
let si=0;
setInterval(()=>{document.getElementById("slide").src=slides[si];si=(si+1)%slides.length;},3500);

/* USERS */
const users=[
  {email:"user1@test.com", password:"1234", name:"Ú©Ø§Ø±Ø¨Ø± Û±"},
  {email:"user2@test.com", password:"abcd", name:"Ú©Ø§Ø±Ø¨Ø± Û²"}
];

/* ADMIN */
const adminUserName="admin";
const adminPassword="1234";

/* PRODUCTS */
let products=[
 {id:1,name:"Ú¯ÙˆØ´ÛŒ Ø³Ø§Ù…Ø³ÙˆÙ†Ú¯ A54",price:12000000,img:"https://picsum.photos/200?1"},
 {id:2,name:"Ù„Ù¾â€ŒØªØ§Ù¾ Ù„Ù†ÙˆÙˆ",price:35000000,img:"https://picsum.photos/200?2"},
 {id:3,name:"Ù‡Ø¯ÙÙˆÙ† Ø¨Ù„ÙˆØªÙˆØ«",price:1500000,img:"https://picsum.photos/200?3"},
 {id:4,name:"ØªÙ„ÙˆÛŒØ²ÛŒÙˆÙ† 55 Ø§ÛŒÙ†Ú†",price:28000000,img:"https://picsum.photos/200?4"},
 {id:5,name:"Ø³Ø§Ø¹Øª Ù‡ÙˆØ´Ù…Ù†Ø¯",price:4200000,img:"https://picsum.photos/200?5"}
];

/* RENDER PRODUCTS */
const productList=document.getElementById("productList");
const userProductList=document.getElementById("userProductList");
const search=document.getElementById("search");

function renderProducts(list,container){
 container.innerHTML="";
 list.forEach(p=>{
  container.innerHTML+=`
   <div class="card">
    <img src="${p.img}">
    <h4>${p.name}</h4>
    <div class="price">${p.price.toLocaleString()} ØªÙˆÙ…Ø§Ù†</div>
    <button onclick="addToCartUser(${p.id})">Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯</button>
   </div>
  `;
 });
}
renderProducts(products,productList);
renderProducts(products,userProductList);

/* SEARCH */
search.addEventListener("input",()=>{
 const v=search.value.trim();
 renderProducts(products.filter(p=>p.name.includes(v)),productList);
 renderProducts(products.filter(p=>p.name.includes(v)),userProductList);
});

/* CART USER */
function getCartUser(){return JSON.parse(localStorage.getItem("cartUser"))||[];}
function saveCartUser(c){localStorage.setItem("cartUser",JSON.stringify(c));updateCartCountUser();}
function addToCartUser(id){const cart=getCartUser();cart.push(products.find(p=>p.id===id));saveCartUser(cart);alert("Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯");}
function removeFromCartUser(i){const cart=getCartUser();cart.splice(i,1);saveCartUser(cart);loadCartUser();}
function loadCartUser(){const cart=getCartUser();const div=document.getElementById("cartItemsUser");let total=0;div.innerHTML="";cart.forEach((p,i)=>{total+=p.price;div.innerHTML+=`<div class="cart-item"><span>${p.name}</span><span>${p.price.toLocaleString()} <button onclick="removeFromCartUser(${i})">âŒ</button></span></div>`;});document.getElementById("totalPriceUser").innerText="Ø¬Ù…Ø¹ Ú©Ù„: "+total.toLocaleString()+" ØªÙˆÙ…Ø§Ù†";}
function updateCartCountUser(){document.getElementById("cartCount").innerText=getCartUser().length;}
updateCartCountUser();

/* PAGES */
function showPage(id){
 document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
 document.getElementById(id).classList.add("active");
 if(id==="cartUser") loadCartUser();
 if(id==="admin") renderAdmin();
 if(id==="user") renderProducts(products,userProductList);
}

/* LOGIN SHARED */
function login(){
 const user=document.getElementById("loginUser").value.trim();
 const pass=document.getElementById("loginPass").value.trim();
 if(user===adminUserName && pass===adminPassword){
   alert("ÙˆØ±ÙˆØ¯ Ù…Ø¯ÛŒØ± Ù…ÙˆÙÙ‚!");
   showPage("admin");
 } else {
   const u=users.find(x=>x.email===user && x.password===pass);
   if(u){
     alert("ÙˆØ±ÙˆØ¯ Ú©Ø§Ø±Ø¨Ø± Ù…ÙˆÙÙ‚!");
     showPage("user");
   } else {
     alert("Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª!");
   }
 }
}

/* ADMIN PANEL */
function renderAdmin(){
 const adminProducts=document.getElementById("adminProducts");
 adminProducts.innerHTML="";
 products.forEach((p,i)=>{
   adminProducts.innerHTML+=`
     <div class="card" style="margin-bottom:5px;">
       <strong>${p.name}</strong> - ${p.price.toLocaleString()} ØªÙˆÙ…Ø§Ù†
       <button onclick="editProduct(${i})">ÙˆÛŒØ±Ø§ÛŒØ´</button>
       <button onclick="deleteProduct(${i})">Ø­Ø°Ù</button>
     </div>`;
 });

 const adminCart=document.getElementById("adminCart");
 const cart=getCartUser();
 adminCart.innerHTML="";
 cart.forEach((c,i)=>{adminCart.innerHTML+=`<div>${c.name} - ${c.price.toLocaleString()} ØªÙˆÙ…Ø§Ù†</div>`;});
}

function addProduct(){
 const name=document.getElementById("adminName").value.trim();
 const price=parseInt(document.getElementById("adminPrice").value);
 const img=document.getElementById("adminImg").value.trim();
 if(!name||!price||!img){alert("Ù‡Ù…Ù‡ ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯");return;}
 products.push({id:Date.now(),name,price,img});
 renderProducts(products,productList);
 renderProducts(products,userProductList);
 renderAdmin();
 document.getElementById("adminName").value="";
 document.getElementById("adminPrice").value="";
 document.getElementById("adminImg").value="";
}

function deleteProduct(i){products.splice(i,1);renderProducts(products,productList);renderProducts(products,userProductList);renderAdmin();}
function editProduct(i){
 const p=products[i];
 const newName=prompt("Ù†Ø§Ù… Ù…Ø­ØµÙˆÙ„:",p.name);
 const newPrice=parseInt(prompt("Ù‚ÛŒÙ…Øª Ù…Ø­ØµÙˆÙ„:",p.price));
 const newImg=prompt("Ù„ÛŒÙ†Ú© Ø¹Ú©Ø³:",p.img);
 if(newName&&newPrice&&newImg){products[i]={id:p.id,name:newName,price:newPrice,img:newImg};renderProducts(products,productList);renderProducts(products,userProductList);renderAdmin();}
}
</script>
</body>
</html>
